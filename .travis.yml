language: node_js
notifications:
  email: false
install: case $TRAVIS_BRANCH in greenkeeper*) npm i;; *) npm ci;; esac;
before_script:
- npm run greenkeeper:update-lockfile
- npm ls --production >/dev/null
after_script: npm run greenkeeper:upload-lockfile
after_success: npm run coverage:report
deploy:
  provider: script
  skip_cleanup: true
  script: npx semantic-release
branches:
  except:
  - "/^v\\d+\\.\\d+\\.\\d+$/"
